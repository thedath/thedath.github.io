(this["webpackJsonpthedath.github.io"]=this["webpackJsonpthedath.github.io"]||[]).push([[0],{197:function(e,t,a){e.exports=a(227)},226:function(e,t,a){},227:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),i=a.n(o),c=a(19),s=a(38),l=a(183),u=a(39),d=a(23),m=a(14),p=a.n(m),f=a(31),v=a(184),b=a.n(v),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(){var t=Object(f.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"post-processing"}),t.prev=1,t.next=4,b.a.get("https://jsonplaceholder.typicode.com/posts").then((function(t){var n=[];t.data&&Array.isArray(t.data)?(n=t.data.slice(0,e),a({type:"post-list",payload:n})):a({type:"post-error",payload:"Invalid response from server xxx"})})).catch((function(e){a({type:"post-error",payload:"Request failed or invalid response"})}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),a({type:"post-error",payload:"Unable perform post fetch call"});case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e,t){return function(a){var n=e;switch(t){case"up":n--;break;case"down":n++}a({type:"post-moving",payload:{from:e,to:n}})}},y=function(e){return function(t){t({type:"post-time-travel",payload:e})}},E={list:[],history:[],errorMessage:"",processing:!1},x=function(e,t,a){var n=e[a];if(n){var r=e[t];return e[a]=r,e[t]=n,{movedPostId:r.id,newPostList:e}}return!1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"post-list":return Object(d.a)({},e,{list:t.payload,processing:!1});case"post-error":return Object(d.a)({},e,{errorMessage:t.payload,processing:!1});case"post-processing":return Object(d.a)({},e,{processing:!0});case"post-moving":var a=t.payload.from,n=t.payload.to,r=x(Object(u.a)(e.list),a,n);return r?Object(d.a)({},e,{list:r.newPostList,history:[{movedPostId:r.movedPostId,date:(new Date).getTime(),fromIndex:a,toIndex:n}].concat(Object(u.a)(e.history))}):Object(d.a)({},e);case"post-time-travel":for(var o=t.payload,i=Object(u.a)(e.history),c=Object(u.a)(e.list),s=0;s<=o;s++){var l=i[s],m=x(c,l.toIndex,l.fromIndex);m&&(c=m.newPostList)}return Object(d.a)({},e,{list:c,history:i.slice(o+1,i.length)});default:return e}},w=Object(c.c)({post:j}),O=a(13),k=a(254),I=a(255),P=a(48),N=a(249),C=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.post}));return{postList:t.list,postHistory:t.history,postErrorMessage:t.errorMessage,postProcessing:t.processing,fetchPosts:Object(n.useCallback)(function(){var t=Object(f.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(g(a));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),movePost:Object(n.useCallback)(function(){var t=Object(f.a)(p.a.mark((function t(a,n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(h(a,n));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),[e]),travelThroughTime:Object(n.useCallback)(function(){var t=Object(f.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(y(a));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e])}},T=a(241),B=a(46),V=a(231),L=a(242),M=a(243),S=a(256),W=a(244),A=a(245),z=a(246),D=a(247),H=a(248),J=Object(T.a)((function(e){return{root:{margin:e.spacing(2)},title:{fontWeight:"bold"},body:{fontWeight:"lighter"},movers:{marginLeft:"auto"},up:{color:O.a.green[700]},down:{color:O.a.red[700]},avatar:{backgroundColor:O.a.purple[400]}}})),R=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return void 0!==e.id&&"number"===typeof e.id&&void 0!==e.userId&&"number"===typeof e.userId&&void 0!==e.title&&"string"===typeof e.title&&""!==e.title&&void 0!==e.body&&"string"===typeof e.body&&""!==e.body&&(!t||t&&void 0!==e.index&&"number"===typeof e.index&&void 0!==e.upVisible&&"boolean"===typeof e.upVisible&&void 0!==e.downVisible&&"boolean"===typeof e.downVisible)},q=function(e){var t=e.index,a=e.id,o=e.title,i=e.body,c=e.userId,s=e.upVisible,l=e.downVisible,u=J(),d=C().movePost,m=Object(n.useState)(!0),p=Object(B.a)(m,2),f=p[0],v=p[1];Object(n.useEffect)((function(){return v(!0),function(){v(!1)}}),[t]);var b=Object(n.useRef)(null),g=function(){return e=b,window.scrollTo(0,e.current.offsetTop+20);var e};if(!R({index:t,id:a,title:o,body:i,userId:c,upVisible:s,downVisible:l},!0))return null;var h=function(e){d(t,e),v(!1),g()};return r.a.createElement(V.a,{in:f,timeout:{appear:200,enter:1e3,exit:300}},r.a.createElement(L.a,{"data-testid":"post-".concat(a),"aria-label":"post",className:u.root,elevation:2,ref:b},r.a.createElement(M.a,{avatar:r.a.createElement(S.a,{"aria-label":"recipe",className:u.avatar},a),title:r.a.createElement(P.a,{"data-testid":"post-title-".concat(a),variant:"subtitle1",gutterBottom:!0,className:u.title},o)}),r.a.createElement(W.a,null,r.a.createElement(P.a,{variant:"subtitle2",gutterBottom:!0,className:u.body},i)),r.a.createElement(A.a,{disableSpacing:!0},r.a.createElement("div",{className:u.movers},s&&r.a.createElement(z.a,{"data-testid":"post-button-move-up-".concat(a),"aria-label":"move up",onClick:function(){return h("up")}},r.a.createElement(D.a,{className:u.up})),l&&r.a.createElement(z.a,{"data-testid":"post-button-move-down-".concat(a),"aria-label":"move down",onClick:function(){return h("down")}},r.a.createElement(H.a,{className:u.down}))))))},U=Object(T.a)((function(e){return{root:{padding:e.spacing(2)},heading:{margin:e.spacing(2),color:"white"}}})),$=function(){var e=U(),t=C().postList;return r.a.createElement("div",{className:e.root},r.a.createElement(P.a,{className:e.heading,variant:"h4"},"Sortable Post List"),t.map((function(e,a){return R(e)?r.a.createElement(q,Object.assign({key:"post-key-".concat(e.id),index:a},e,{upVisible:0!==a,downVisible:a+1<t.length})):null})))},F=a(251),G=a(250),K=a(57),Q=a.n(K),X=Object(T.a)((function(e){return{root:{marginBottom:e.spacing(2)},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},timeTravelButton:{backgroundColor:O.a.green[400],color:"white"}}})),Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return void 0!==e.movedPostId&&"number"===typeof e.movedPostId&&void 0!==e.date&&"number"===typeof e.date&&void 0!==e.fromIndex&&"number"===typeof e.fromIndex&&void 0!==e.toIndex&&"number"===typeof e.toIndex&&(!t||void 0!==e.index&&"number"===typeof e.index)},Z=function(e){var t=e.index,a=e.movedPostId,o=e.date,i=e.fromIndex,c=e.toIndex,s=X(),l=C().travelThroughTime,u=Object(n.useState)(!0),d=Object(B.a)(u,2),m=d[0],p=d[1];if(Object(n.useEffect)((function(){return p(!0),function(){p(!1)}}),[t]),!Y({index:t,movedPostId:a,date:o,fromIndex:i,toIndex:c},!0))return null;return r.a.createElement(V.a,{in:m,timeout:{appear:1e3,enter:1e3,exit:1e3}},r.a.createElement(L.a,{"data-testid":"action-history-item-".concat(t),"data-moved-post-id":"moved-post-id-".concat(a),"aria-label":"action-history-item",className:s.root,elevation:2},r.a.createElement(W.a,null,r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{item:!0,xs:!0},r.a.createElement(I.a,{height:70},r.a.createElement(P.a,{variant:"subtitle1",gutterBottom:!0},"Moved post ".concat(a," from ").concat(i," index to ").concat(c," index")),r.a.createElement(P.a,{variant:"caption",gutterBottom:!0},"".concat(Q()().diff(Q()(o),"seconds")," seconds ago")))),r.a.createElement(N.a,{item:!0,xs:4},r.a.createElement(I.a,{display:"flex",flexDirection:"row-reverse",alignItems:"flex-end",height:70},r.a.createElement(I.a,null,r.a.createElement(G.a,{"data-testid":"history-item-time-travel-button-".concat(t),"aria-label":"time travel",size:"small",variant:"contained",className:s.timeTravelButton,onClick:function(){p(!0),l(t)}},"Time Travel"))))))))},_=Object(T.a)((function(e){return{root:{marginTop:e.spacing(6)},heading:{margin:e.spacing(2)},cardContent:{backgroundColor:O.a.grey[100]},historyContainer:{paddingTop:e.spacing(2)}}})),ee=function(){var e=_(),t=C().postHistory;return r.a.createElement(L.a,{className:e.root,elevation:5},r.a.createElement(M.a,{title:"List of action commited"}),r.a.createElement(F.a,null),r.a.createElement(W.a,{className:e.cardContent},0===t.length&&r.a.createElement(P.a,{variant:"subtitle1"},"Move some post to generate action history . . ."),r.a.createElement("div",{className:e.historyContainer},t.map((function(e,t){return Y(e)?r.a.createElement(Z,Object.assign({key:"history-key-".concat(t),index:t},e)):null})))))},te=a(252),ae=a(253),ne=Object(T.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#3949AB",backgroundColor:"white"},error:{color:O.a.red[400],marginTop:e.spacing(10)}}})),re=function(){var e=ne(),t=C(),a=t.postProcessing,o=t.postErrorMessage,i=t.fetchPosts;return Object(n.useEffect)((function(){i(5)}),[i]),a?r.a.createElement(te.a,{open:!0,className:e.backdrop},r.a.createElement(ae.a,null)):""!==o?r.a.createElement(k.a,{maxWidth:"lg"},r.a.createElement(I.a,{display:"flex",flexDirection:"",justifyContent:"center"},r.a.createElement(P.a,{variant:"h5",className:e.error},"Error: ",o))):r.a.createElement("div",{style:{background:"linear-gradient(172deg, #3949AB 0%, #3949AB 15%, #EEEEEE 15%, #EEEEEE 100%)"}},r.a.createElement(k.a,{maxWidth:"lg"},r.a.createElement(N.a,{container:!0,justify:"center",spacing:2},r.a.createElement(N.a,{item:!0,xs:12,sm:12,md:6,lg:7,xl:8},r.a.createElement($,null)),r.a.createElement(N.a,{item:!0,xs:12,sm:12,md:6,lg:5,xl:4},r.a.createElement(ee,null)))))},oe=function(){return r.a.createElement(s.a,{store:Object(c.d)(w,{},Object(c.a)(l.a))},r.a.createElement(re,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(226);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[197,1,2]]]);
//# sourceMappingURL=main.13ecd993.chunk.js.map